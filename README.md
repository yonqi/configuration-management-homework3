# configuration-management-homework3
Домашки по конфигурационному управлению (номер 3!)
## Вариант 10
### Задание 3

Разработать инструмент командной строки для учебного конфигурационного
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из
входного формата в выходной. Синтаксические ошибки выявляются с выдачей
сообщений.

Входной текст на **учебном конфигурационном языке** принимается из
стандартного ввода. Выходной текст на **языке yaml** попадает в стандартный
вывод.

Однострочные комментарии:
```
" Это однострочный комментарий
```

Словари:
```
{
 имя = значение;
 имя = значение;
 имя = значение;
 ...
}
```

Имена:
```
[_a-z]+
```

Значения:
```
• Числа.
• Словари.
```

Объявление константы на этапе трансляции:
```
имя := значение;
```

Вычисление константного выражения на этапе трансляции (постфиксная
форма), пример:
```
[имя 1 +]
```

Результатом вычисления константного выражения является значение.
Для константных вычислений определены операции и функции:
```
1. Сложение.
2. mod().
```
   
Все конструкции учебного конфигурационного языка (с учетом их
возможной вложенности) должны быть покрыты тестами. Необходимо показать 3
примера описания конфигураций из разных предметных областей.

#### Общее описание проекта

Этот проект представляет собой инструмент командной строки для визуализации графа зависимостей паке

#### Описание функций
1. `load_config(config_file)`
  - Описание: Загружает конфигурацию из файла в формате TOML. В конфигурации содержатся параметры, такие как имя пакета, путь для сохранения графа и максимальная глубина анализа зависимостей.
  - Аргументы: config_file — путь к конфигурационному файлу.
  - Возвращает: Объект, представляющий содержимое TOML-файла в виде словаря Python.

2. `get_dependencies(package_name, max_depth)`
  - Описание: Извлекает зависимости пакета из файла .nupkg. Пакет распаковывается как ZIP-файл, а зависимости читаются из XML-документа .nuspec, который входит в состав .nupkg.
  - Аргументы:
    - package_name: Имя пакета, зависимости которого необходимо получить.
    - max_depth: Максимальная глубина анализа зависимостей (ограничивает рекурсивную проверку зависимостей до указанного уровня).
  - Возвращает: Словарь зависимостей, где ключ — это имя пакета, а значение — список зависимых пакетов.

3. `create_graph(dependencies, package_name, max_depth)`
  - Описание: Создает граф зависимостей с помощью библиотеки Graphviz. Строит узлы и связи между ними на основе зависимостей, извлечённых для пакета.
  - Аргументы:
    - dependencies: Словарь
   
#### Настройки `config.toml`:
- program_path: Путь к программе для визуализации графов.
- package_name: Имя основного пакета, для которого необходимо построить граф зависимостей. Ожидается, что файл .nupkg с таким именем будет находиться в той же директории, что и программа.
- output_image: Имя выходного файла, в который будет сохранен граф зависимостей. Программа добавит расширение .png после генерации изображения.
- max_depth: Максимальная глубина анализа зависимостей. Это ограничивает количество уровней вложенных зависимостей, которые будут отображены в графе. Например, если указать max_depth = 2, то будут показаны зависимости пакета и их зависимости, но не глубже.

#### Тест

##### Пакет newtonsoft.json.13.0.3.nupkg

![image](https://github.com/user-attachments/assets/0c696a86-7de4-4d87-9824-b261f86a65bd)
![dependencies_graph](https://github.com/user-attachments/assets/92aa154a-2856-4677-94a5-94405d9104af)


##### Пакет microsoft.extensions.dependencyinjection.9.0.0-rc.2.24473.5
